<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GESTION DE GASTOS Y TIKETS</title>
    <link rel="stylesheet" href="css/styles.css">
</head>
<body>

    <h1>GESTION DE GASTOS Y TIKETS</h1>
    <p id="headerUserDisplay" style="text-align: center; color: #007bff; font-weight: bold; margin-top: -35px; margin-bottom: 30px; font-size: 0.9rem;"></p>

    <div style="width: 100%; max-width: 1200px; text-align: right; margin-bottom: 20px;">
        <button id="btnLogout" class="btn-save" style="width: auto; background-color: #dc3545; padding: 8px 15px;">Cerrar Sesión</button>
    </div>

    <div class="card-container">
        <!-- Tarjeta 1 -->
        <div class="card" onclick="location.href='tickets.html'">
            <h2>Tikets y Recibos</h2>
            <svg class="card-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path><polyline points="14 2 14 8 20 8"></polyline><line x1="16" y1="13" x2="8" y2="13"></line><line x1="16" y1="17" x2="8" y2="17"></line><polyline points="10 9 9 9 8 9"></polyline></svg>
            <p>Sube o captura tus tickets de compra.</p>
        </div>

        <!-- Tarjeta 2 -->
        <div class="card" onclick="location.href='consultas.html'">
            <h2>Consultas</h2>
            <svg class="card-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line></svg>
            <p>Consulta y filtra el historial de gastos.</p>
        </div>

        <!-- Tarjeta Ingresos (NUEVA) -->
        <div class="card" onclick="location.href='ingresos.html'">
            <h2>Ingresos</h2>
            <svg class="card-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 1v22M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"></path></svg>
            <p>Gestiona tus entradas de dinero.</p>
        </div>

        <!-- Tarjeta 3 -->
        <div class="card" onclick="location.href='configuracion.html'">
            <h2>Gestión de Categorías</h2>
            <svg class="card-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"></path><line x1="7" y1="7" x2="7.01" y2="7"></line></svg>
            <p>Administra las categorías disponibles.</p>
        </div>

        <!-- Tarjeta 4 -->
        <div class="card" onclick="location.href='perfil.html'">
            <h2>Perfil</h2>
            <svg class="card-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path><circle cx="12" cy="7" r="4"></circle></svg>
            <p>Gestiona tu contraseña y cuenta.</p>
        </div>
    </div>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-app.js";
        import { getAuth, onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-auth.js";

        const firebaseConfig = {
            apiKey: "AIzaSyAD9gC8MPGCVP89xoFVkJWE0LKStxhCSeQ",
            authDomain: "tikets-e8747.firebaseapp.com",
            projectId: "tikets-e8747",
            storageBucket: "tikets-e8747.firebasestorage.app",
            messagingSenderId: "1011614009578",
            appId: "1:1011614009578:web:b18505cbd4b98e7a6d2f93",
            measurementId: "G-Z3HSTEH6JN"
        };

        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);

        onAuthStateChanged(auth, (user) => {
            if (!user) {
                window.location.href = 'login.html';
            } else {
                document.getElementById('headerUserDisplay').textContent = `Usuario: ${user.email}`;
            }
        });

        document.getElementById('btnLogout').addEventListener('click', () => {
            signOut(auth);
        });
    </script>
</body>
</html>
